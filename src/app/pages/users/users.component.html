<div class="row" *ngIf="currentUser">
  <div class="col-md-4">
    <div class="card card-user">
      <div class="image">
        <img src="assets/img/damir-bosnjak.jpg" alt="...">
      </div>
      <div class="card-body">
        <div class="author">
          <a href="javascript:void(0)">
            <img class="avatar border-gray"
              [src]="currentUser.avatar ? currentUser.avatar: 'assets/img/default-avatar.png'" alt="...">
            <h5 class="title">{{currentUser.name}}</h5>
          </a>
          <p class="description">
            {{currentUser.tag_line}}
          </p>
        </div>
        <p class="description text-center">
          {{currentUser.about}}
        </p>
        <hr>
        <div class="text-center">
          <div class="row">

            <div class="col-md-3 col-sm-4 col-xs-6">
              <strong>{{currentUser.dashboard.accounts.all}}</strong><br><small>All</small>
            </div>
            <div class="col-md-3 col-sm-4 col-xs-6">
              <strong>{{currentUser.dashboard.accounts.closed}}</strong><br><small>Closed</small>
            </div>
            <div class="col-md-3 col-sm-4 col-xs-6">
              <strong>{{currentUser.dashboard.accounts.active}}</strong><br><small>Active</small>
            </div>
            <div class="col-md-3 col-sm-4 col-xs-6">
              <strong> {{currentUser.dashboard.accounts.paused}}</strong><br><small>Paused</small>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- <div class="col-md-8">
    <div class="card">
      <div class="card-header">
        <h4 class="card-title">Team Members</h4>
      </div>
      <div class="card-body">
        <ul class="list-unstyled team-members">
          <li *ngFor="let admin of currentUser.members.admins">
            <div class="row">
              <div class="col-md-2 col-2">
                <div class="avatar">
                  <img [src]="admin.avatar ? admin.avatar: 'assets/img/default-avatar.png'" alt="..."
                    class="img-circle img-no-padding img-responsive">
                </div>
              </div>
              <div class="col-md-7 col-7">
                {{admin.name}}
                <br />
                <span class="text-muted">
                  <small>Admin</small>
                </span>
              </div>
              <div class="col-md-3 col-3 text-right">
                <button (click)="routeTo(admin.id)" class="btn btn-sm btn-outline-success btn-round btn-icon m-0"><i
                    class="fa fa-envelope"></i></button>
              </div>
            </div>
          </li>
          <li *ngFor="let director of currentUser.members.directors">
            <div class="row">
              <div class="col-md-2 col-2">
                <div class="avatar">
                  <img [src]="director.avatar ? director.avatar: 'assets/img/default-avatar.png'" alt="..."
                    class="img-circle img-no-padding img-responsive">
                </div>
              </div>
              <div class="col-md-7 col-7">
                {{director.name}}
                <br />
                <span class="text-muted">
                  <small>Account Director</small>
                </span>
              </div>
              <div class="col-md-3 col-3 text-right">
                <button (click)="routeTo(director.id)" class="btn btn-sm btn-outline-success btn-round btn-icon m-0"><i
                    class="fa fa-envelope"></i></button>
              </div>
            </div>
          </li>

          <li *ngFor="let manager of currentUser.members.managers">
            <div class="row">
              <div class="col-md-2 col-2">
                <div class="avatar">
                  <img [src]="manager.avatar ? manager.avatar: 'assets/img/default-avatar.png'" alt="..."
                    class="img-circle img-no-padding img-responsive">
                </div>
              </div>
              <div class="col-md-7 col-7">
                {{manager.name}}
                <br />
                <span class="text-muted">
                  <small>Account Manager</small>
                </span>
              </div>
              <div class="col-md-3 col-3 text-right">
                <button (click)="routeTo(manager.id)" class="btn btn-sm btn-outline-success btn-round btn-icon m-0"><i
                    class="fa fa-envelope"></i></button>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </div> -->


  <div class="col-md-8">
    <div class="card">
      <div class="card-header">
        <h5 class="float-left"> Team</h5>
        <a routerLink="/register-user" *ngIf="currentUser.role_id != 4" class="btn btn-primary  float-right">Register
          user</a>

      </div>
      <div class="card-body">
        <mat-tree [dataSource]="dataSource" [treeControl]="treeControl">
          <!-- This is the tree node template for leaf nodes -->
          <mat-tree-node *matTreeNodeDef="let node" matTreeNodePadding>
            <!-- use a disabled button to provide padding for tree leaf -->
            <button mat-icon-button disabled></button>
            {{node.name}}
          </mat-tree-node>
          <!-- This is the tree node template for expandable nodes -->
          <mat-tree-node *matTreeNodeDef="let node;when: hasChild" matTreeNodePadding>
            <button mat-icon-button matTreeNodeToggle [attr.aria-label]="'toggle ' + node.name">
              <mat-icon class="mat-icon-rtl-mirror">
                {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
              </mat-icon>
            </button>
            {{node.name}}
          </mat-tree-node>
        </mat-tree>
      </div>
    </div>
  </div>

  <div class="col-md-8">
    <div class="card">
      <div class="card-header">
        <h4 class="card-title"> Users
        </h4>
      </div>
      <div class="card-body">
        <ng-container>
          <div class="col-md-12 btn btn-primary btn-collape" data-toggle="collapse"
            [attr.data-target]="'#demo' + currentUser.id">
            <div class="float-left">{{currentUser.name}}</div>
          </div>
          <div [id]="'demo' + currentUser.id" class="collapse">
            <div class="text-left">
              <div class="card-body" *ngFor="let ch of currentUser.children">
                <div class="col-md-12 btn btn-success btn-collape " [attr.data-target]="'#demo' + ch.id"
                  data-toggle="collapse">
                  <div class="float-left">{{ch.name}}</div>
                  <!-- <div class="">{{ch.dashboard.accounts.all}}</div>
                  <div class="">{{ch.dashboard.accounts.closed}}</div>
                  <div class="">{{ch.dashboard.accounts.active}}</div>
                  <div class="">{{ch.dashboard.accounts.paused}}</div> -->

                  <div class="row">

                    <div class="col-md-3 col-sm-4 col-xs-6">
                      <strong>{{ch.dashboard.accounts.all}}</strong><br><small>All</small>
                    </div>
                    <div class="col-md-3 col-sm-4 col-xs-6">
                      <strong>{{ch.dashboard.accounts.closed}}</strong><br><small>Closed</small>
                    </div>
                    <div class="col-md-3 col-sm-4 col-xs-6">
                      <strong>{{ch.dashboard.accounts.active}}</strong><br><small>Active</small>
                    </div>
                    <div class="col-md-3 col-sm-4 col-xs-6">
                      <strong> {{ch.dashboard.accounts.paused}}</strong><br><small>Paused</small>
                    </div>

                  </div>
                </div>
                <div class=" collapse" [id]="'demo' + ch.id">
                  <div class="card-body">
                    <div class="col-md-12 col-sm-4 col-xs-6 btn btn-warning " *ngFor="let chTree of ch.children">
                      <!-- <h6>{{chTree.name}}</h6> -->
                      <div class="float-left">{{chTree.name}}</div>

                      <div class="row">

                        <div class="col-md-3 col-sm-4 col-xs-6">
                          <strong>{{chTree.dashboard.accounts.all}}</strong><br><small>All</small>
                        </div>
                        <div class="col-md-3 col-sm-4 col-xs-6">
                          <strong>{{chTree.dashboard.accounts.closed}}</strong><br><small>Closed</small>
                        </div>
                        <div class="col-md-3 col-sm-4 col-xs-6">
                          <strong>{{chTree.dashboard.accounts.active}}</strong><br><small>Active</small>
                        </div>
                        <div class="col-md-3 col-sm-4 col-xs-6">
                          <strong> {{chTree.dashboard.accounts.paused}}</strong><br><small>Paused</small>
                        </div>

                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <hr>
            </div>
          </div>
        </ng-container>
      </div>
    </div>
  </div>