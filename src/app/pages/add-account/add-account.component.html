<div class="row">
  <div class="col-md-12">
    <div class="card card-user">
      <div class="card-header">
        <h5 class="card-title">Adword Account</h5>
      </div>
      <div class="card-body" *ngIf="currentAccount">
        <form [formGroup]="accountForm">
          <div class="row">
            <div class="col-md-6">
              <div class="form-group" [ngClass]="{'has-error': acc_name.invalid && acc_name.dirty}">
                <label>Account Name</label>
                <input type="text" formControlName="acc_name" class="form-control" placeholder="Account Name">
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group" [ngClass]="{'has-error': g_acc_id.invalid && g_acc_id.dirty}">
                <label>Google Account ID</label>
                <input type="text" formControlName="g_acc_id" class="form-control" placeholder="Google Account ID"
                  [readonly]="currentAccount && currentAccount.id">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-4">
              <div class="form-group" [ngClass]="{'has-error': impressions.invalid && impressions.dirty}">
                <label>Impressions</label>
                <input type="text" formControlName="impressions" class="form-control" placeholder="Impressions"
                  [readonly]="currentAccount && currentAccount.id">
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group" [ngClass]="{'has-error': cpa.invalid && cpa.dirty}">
                <label>CPA</label>
                <input type="text" formControlName="cpa" class="form-control" placeholder="CPA"
                  [readonly]="currentAccount && currentAccount.id">
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group" [ngClass]="{'has-error': click.invalid && click.dirty}">
                <label>Click</label>
                <input type="text" formControlName="click" class="form-control" placeholder="Click"
                  [readonly]="currentAccount && currentAccount.id">
              </div>
            </div>
          </div>


          <div class="row">
            <div class="col-md-4">
              <div class="form-group"
                [ngClass]="{'has-error': accountForm.get('conversion').invalid && accountForm.get('conversion').dirty}">
                <label>Conversion</label>
                <input type="text" formControlName="conversion" class="form-control" placeholder="conversion"
                  [readonly]="currentAccount && currentAccount.id">
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group"
                [ngClass]="{'has-error': accountForm.get('cpc').invalid && accountForm.get('cpc').dirty}">
                <label>Cpc</label>
                <input type="text" formControlName="cpc" class="form-control" placeholder="Cpc"
                  [readonly]="currentAccount && currentAccount.id">
              </div>
            </div>
            <div class="col-md-4">
              <div class="form-group"
                [ngClass]="{'has-error': accountForm.get('cost').invalid && accountForm.get('cost').dirty}">
                <label>Cost</label>
                <input type="text" formControlName="cost" class="form-control" placeholder="cost"
                  [readonly]="currentAccount && currentAccount.id">
              </div>
            </div>

            <div class="col-md-4">
              <div class="form-group"
                [ngClass]="{'has-error': accountForm.get('totalConversion').invalid && accountForm.get('totalConversion').dirty}">
                <label>Total conversion</label>
                <input type="text" formControlName="totalConversion" class="form-control" placeholder="Total conversion"
                  [readonly]="currentAccount && currentAccount.id">
              </div>
            </div>

          </div>

          <div class="row">
            <div class="col-md-6">
              <div class="form-group" [ngClass]="{'has-error': account_director.invalid && account_director.dirty}">
                <label>Account Director</label>
                <select class="form-control" formControlName="account_director">
                  <option value="">Select Director</option>
                  <option *ngFor="let director of accountDirectors.items" [value]="director.id">{{director.name}}
                  </option>
                </select>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group" [ngClass]="{'has-error': account_manager.invalid && account_manager.dirty}">
                <label>Account Manager</label>
                <select class="form-control" formControlName="account_manager">
                  <option value="">Select Manager</option>
                  <option *ngFor="let manager of accountManagers.items" [value]="manager.id">{{manager.name}}</option>
                </select>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label>Cron Time</label>
                <select class="form-control" formControlName="cron_time" placeholder="Cron Time">
                  <option *ngFor="let cronTime of cronTimes" [value]="cronTime">{{cronTime}}</option>
                </select>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label>Account Priority</label>
                <select class="form-control" formControlName="acc_priority" placeholder="Account Priority">
                  <option *ngFor="let priority of accPriority" [value]="priority">{{priority}}</option>
                </select>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label>Status</label>
                <select class="form-control" formControlName="acc_status" placeholder="Status">
                  <option *ngFor="let st of accStatus" [value]="st">{{st}}</option>
                </select>
              </div>
            </div>

            <div class="col-md-6" *ngIf="accountForm.value.acc_status != 'active'">
              <div class="form-group"
                [ngClass]="{'has-error': accountForm.get('reason_id').invalid && accountForm.get('reason_id').dirty}">
                <label>Select reason</label>
                <select class="form-control" formControlName="reason_id" placeholder="Reason">
                  <option value="">Select reason</option>
                  <option *ngFor="let rs of reasons" [value]="rs.id">{{rs.title}}</option>
                </select>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6" *ngIf="accountForm.value.acc_status != 'active'">
              <div class="form-group"
                [ngClass]="{'has-error': accountForm.get('comment').invalid && accountForm.get('comment').dirty}">
                <label>Comment</label>
                <textarea class="form-control textarea" formControlName="comment" placeholder="Comment"></textarea>
              </div>
            </div>
            <div class="col-md-6"
              *ngIf="accountForm.value.acc_status != 'active'  &&  accountForm.value.acc_status != 'paused'">
              <div class="form-group">
                <label>Upwork comment</label>
                <textarea class="form-control textarea" formControlName="up_comments"
                  placeholder="Upwork comment"></textarea>
              </div>
            </div>

          </div>
          <div class="row"
            *ngIf="accountForm.value.acc_status != 'active' &&  accountForm.value.acc_status != 'paused'">
            <div class="col-md-12">
              <div class="form-group start-align">
                <label>Upwork rating</label>
                <app-rating [initialStars]='rating.value' (ratingOutput)="setRating($event)"></app-rating>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-12">
              <div class="alert alert-danger" *ngIf="errorMessage">
                <span><b> Oops!</b> {{errorMessage}}</span>
              </div>
              <div class="alert alert-success" *ngIf="successMessage">
                <span>{{successMessage}}</span>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="update ml-auto mr-auto">
              <button type="submit" [disabled]="loading" (click)="submit()"
                class="btn btn-primary btn-round">{{currentAccount && currentAccount.id ? 'Update Account' : 'Add Account' }}</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>